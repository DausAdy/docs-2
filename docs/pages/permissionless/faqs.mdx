import VersionWarning from "./VersionWarning"

<VersionWarning version="0.2" />

# permissionless.js FAQs

## Getting `WaitForUserOperationReceiptTimeoutError`?

This error is thrown when the bundler takes too long to bundle your user operation or the default timeout configured in permissionless.js is not enough.
This could be due to the block time of the chain you are using is more than the default timeout.

The easiest way to fix this is to increase the timeout in permissionless.js. You can do this by changing timeout value in `bundlerTransport` like so:

```typescript
const smartAccountClient = createSmartAccountClient({
  account: simpleSmartAccount,
  chain: sepolia, // or whatever chain you are using
  bundlerTransport: http("<bundler_endpoint>", {
    timeout: 30_000 // Custom timeout
  })
})
```

## Can I use social logins (Google, Facebook, etc.) with permissionless.js?

Yes! While permissionless.js doesn't directly implement social logins, you can integrate third-party providers that offer social login capabilities. Popular options include:

- [Magic](https://magic.link)
- [Privy](https://privy.io)
- [Dynamic](https://www.dynamic.xyz)
- [Web3Auth](https://web3auth.io)

These providers can be integrated with permissionless.js to enable social login experiences while leveraging smart accounts for features like gas sponsorship and transaction batching. Check out our [Signers documentation](/permissionless/how-to/signers) for integration guides with these providers.

## Getting `out of gas` errors?

Such errors are thrown when the provided gas limits are not enough to execute the user operation. Usually the gas limits are calculated by the bundler. If you are getting such error, you can try setting up gas limits manually.

```typescript
const userOp = await smartAccountClient.prepareUserOperation({
    calls,
    callGasLimit: 100_000n,
    verificationGasLimit: 100_000n,
    preVerificationGas: 100_000n,
})
```

## Do I need the same saltNonce to re-initialize my Safe?

When initializing a Safe account with `toSafeSmartAccount`, if you want to get the same account address when re-initializing the Safe wallet, you must use the same `saltNonce` value that was used during the initial creation. If no `saltNonce` is specified, `toSafeSmartAccount` defaults to `0n`.

Using a different `saltNonce` will result in a different account address being generated. Here's an example of how to specify the `saltNonce`:

```typescript
const safeAccount = await toSafeSmartAccount({
    client: publicClient,
    entryPoint: {
        address: entryPoint07Address,
        version: "0.7",
    },
    owners: [someSigner],
    saltNonce: 100n, // must match the original saltNonce to get the same address
    version: "1.4.1",
});
```

For more details about the `saltNonce` parameter and other configuration options, see the [reference documentation for toSafeSmartAccount](/permissionless/reference/accounts/toSafeSmartAccount#saltnonce).

## Getting `preVerificationGas is not enough` errors?

This error occurs when the estimated gas for pre-verification is insufficient. This typically happens in two scenarios:

1. When using gas estimation methods like `pimlico_getUserOperationGasPrice` and `eth_estimateUserOperationGas`
2. When using dummy signatures during gas estimation that don't match the length of your final signature

The error message will look like this:
```json
{
    "message": "preVerificationGas is not enough, required: 60676, got: 48550",
    "code": -32500
}
```

To resolve this issue:

1. Add a buffer to your gas estimation values:
   - Increase `preVerificationGas` by ~15000 units
   - Increase `verificationGasLimit` by ~15000 units
2. If using a dummy signature during estimation, ensure it:
   - Has the same byte length as your final signature
   - Contains valid hex characters (0-9, a-f)
   - Matches any length requirements of your smart account implementation

Here's an example of adding buffers to gas values after estimation:

```typescript
// First get the estimated gas values from your bundler
const estimatedGas = await bundlerClient.estimateUserOperationGas(userOperation)

// Then add buffers when preparing the operation
const userOp = await smartAccountClient.prepareUserOperation({
    calls,
    preVerificationGas: estimatedGas.preVerificationGas + 15000n, // Add buffer
    verificationGasLimit: estimatedGas.verificationGasLimit + 15000n, // Add buffer
})
```
